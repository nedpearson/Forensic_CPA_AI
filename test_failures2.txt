.2026-02-25 13:45:29 [ERROR] [req_id:1355ec07-d3fb-4160-a142-b1d507b91324] IntegrityError in create_user: UNIQUE constraint failed: categories.name
2026-02-25 13:45:29 [INFO] [req_id:1355ec07-d3fb-4160-a142-b1d507b91324] Auth event: signup success user_id=None email=newuser@example.com ip=127.0.0.1
C:\dev\github\business\Forensic_CPA_AI\.venv\Lib\site-packages\flask_login\login_manager.py:488: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
  expires = datetime.utcnow() + duration
2026-02-25 13:45:29 [INFO] [req_id:1355ec07-d3fb-4160-a142-b1d507b91324] POST /api/auth/signup - Status: 200 - Latency: 85.51ms
.2026-02-25 13:45:29 [ERROR] [req_id:e81f802f-e935-4b61-a48d-5c9472e41b13] IntegrityError in create_user: UNIQUE constraint failed: categories.name
2026-02-25 13:45:29 [INFO] [req_id:e81f802f-e935-4b61-a48d-5c9472e41b13] Auth event: signup success user_id=None email=dup@example.com ip=127.0.0.1
2026-02-25 13:45:29 [INFO] [req_id:e81f802f-e935-4b61-a48d-5c9472e41b13] POST /api/auth/signup - Status: 200 - Latency: 87.21ms
2026-02-25 13:45:29 [ERROR] [req_id:66ff4433-4cc9-4082-8040-9e46899695cf] IntegrityError in create_user: UNIQUE constraint failed: categories.name
2026-02-25 13:45:29 [INFO] [req_id:66ff4433-4cc9-4082-8040-9e46899695cf] Auth event: signup success user_id=None email=dup@example.com ip=127.0.0.1
2026-02-25 13:45:29 [INFO] [req_id:66ff4433-4cc9-4082-8040-9e46899695cf] POST /api/auth/signup - Status: 200 - Latency: 89.56ms
F2026-02-25 13:45:29 [ERROR] [req_id:ab533b3a-fe86-439d-a7db-62603dee81ab] IntegrityError in create_user: UNIQUE constraint failed: categories.name
2026-02-25 13:45:29 [INFO] [req_id:ab533b3a-fe86-439d-a7db-62603dee81ab] Auth event: signup success user_id=None email=login_success@example.com ip=127.0.0.1
2026-02-25 13:45:29 [INFO] [req_id:ab533b3a-fe86-439d-a7db-62603dee81ab] POST /api/auth/signup - Status: 200 - Latency: 95.04ms
2026-02-25 13:45:29 [WARNING] [req_id:495083de-3375-464c-a8c3-de16cb27b2ba] Auth event: login failed email=login_success@example.com ip=127.0.0.1
2026-02-25 13:45:29 [INFO] [req_id:495083de-3375-464c-a8c3-de16cb27b2ba] POST /api/auth/login - Status: 401 - Latency: 1.01ms
F2026-02-25 13:45:29 [ERROR] [req_id:95081b34-bf48-4984-b1f6-e38f8d314455] IntegrityError in create_user: UNIQUE constraint failed: categories.name
2026-02-25 13:45:29 [INFO] [req_id:95081b34-bf48-4984-b1f6-e38f8d314455] Auth event: signup success user_id=None email=login_fail@example.com ip=127.0.0.1
2026-02-25 13:45:29 [INFO] [req_id:95081b34-bf48-4984-b1f6-e38f8d314455] POST /api/auth/signup - Status: 200 - Latency: 84.66ms
2026-02-25 13:45:29 [WARNING] [req_id:4d3e1377-81c2-4fcc-a34e-caf659838381] Auth event: login failed email=login_fail@example.com ip=127.0.0.1
2026-02-25 13:45:29 [INFO] [req_id:4d3e1377-81c2-4fcc-a34e-caf659838381] POST /api/auth/login - Status: 401 - Latency: 6.69ms
.2026-02-25 13:45:29 [WARNING] [req_id:c5aa4529-0d1c-4911-a694-a6c5e3f7d019] Auth event: login failed email=nonexistent@example.com ip=127.0.0.1
2026-02-25 13:45:29 [INFO] [req_id:c5aa4529-0d1c-4911-a694-a6c5e3f7d019] POST /api/auth/login - Status: 401 - Latency: 1.8ms
2026-02-25 13:45:29 [WARNING] [req_id:823dbb11-7ec6-42bc-a82a-4b52ae539b54] Auth event: login failed email=nonexistent@example.com ip=127.0.0.1
2026-02-25 13:45:29 [INFO] [req_id:823dbb11-7ec6-42bc-a82a-4b52ae539b54] POST /api/auth/login - Status: 401 - Latency: 0.53ms
2026-02-25 13:45:29 [WARNING] [req_id:2471cf7e-6091-4007-b877-d18f3a0139d0] Auth event: login failed email=nonexistent@example.com ip=127.0.0.1
2026-02-25 13:45:29 [INFO] [req_id:2471cf7e-6091-4007-b877-d18f3a0139d0] POST /api/auth/login - Status: 401 - Latency: 0.0ms
2026-02-25 13:45:29 [WARNING] [req_id:f50332fd-86cd-4b35-86cd-53f8bd0fa341] Auth event: login failed email=nonexistent@example.com ip=127.0.0.1
2026-02-25 13:45:29 [INFO] [req_id:f50332fd-86cd-4b35-86cd-53f8bd0fa341] POST /api/auth/login - Status: 401 - Latency: 0.0ms
2026-02-25 13:45:29 [WARNING] [req_id:3be4c8ac-8c79-4e7f-b467-c2291313b401] Auth event: login failed email=nonexistent@example.com ip=127.0.0.1
2026-02-25 13:45:29 [INFO] [req_id:3be4c8ac-8c79-4e7f-b467-c2291313b401] POST /api/auth/login - Status: 401 - Latency: 4.79ms
2026-02-25 13:45:29 [WARNING] [req_id:63b78f9e-a4f3-49db-8fc4-1872bf9c477a] Auth event: login rate limited ip=127.0.0.1
2026-02-25 13:45:29 [INFO] [req_id:63b78f9e-a4f3-49db-8fc4-1872bf9c477a] POST /api/auth/login - Status: 429 - Latency: 0.0ms
.2026-02-25 13:45:29 [ERROR] [req_id:92c6d6fb-59a1-4b9e-9cf2-f0e0dd77d463] IntegrityError in create_user: UNIQUE constraint failed: categories.name
2026-02-25 13:45:29 [INFO] [req_id:92c6d6fb-59a1-4b9e-9cf2-f0e0dd77d463] Auth event: signup success user_id=None email=me@example.com ip=127.0.0.1
2026-02-25 13:45:29 [INFO] [req_id:92c6d6fb-59a1-4b9e-9cf2-f0e0dd77d463] POST /api/auth/signup - Status: 200 - Latency: 93.08ms
2026-02-25 13:45:29 [INFO] [req_id:cb8bf530-eeae-4c5b-a939-5224f5e23e6d] GET /api/auth/me - Status: 401 - Latency: 3.51ms
F
======================================================================
FAIL: test_03_signup_duplicate_fails (test_auth_endpoints.AuthEndpointsTestCase.test_03_signup_duplicate_fails)
Integration test: Signup failure on duplicate email
----------------------------------------------------------------------
Traceback (most recent call last):
  File "C:\dev\github\business\Forensic_CPA_AI\tests\test_auth_endpoints.py", line 56, in test_03_signup_duplicate_fails
    self.assertEqual(resp.status_code, 400)
AssertionError: 200 != 400

======================================================================
FAIL: test_04_login_success (test_auth_endpoints.AuthEndpointsTestCase.test_04_login_success)
Integration test: Login with correct credentials
----------------------------------------------------------------------
Traceback (most recent call last):
  File "C:\dev\github\business\Forensic_CPA_AI\tests\test_auth_endpoints.py", line 68, in test_04_login_success
    self.assertEqual(resp.status_code, 200)
AssertionError: 401 != 200

======================================================================
FAIL: test_07_me_and_logout (test_auth_endpoints.AuthEndpointsTestCase.test_07_me_and_logout)
Integration test: /me and /logout endpoints
----------------------------------------------------------------------
Traceback (most recent call last):
  File "C:\dev\github\business\Forensic_CPA_AI\tests\test_auth_endpoints.py", line 98, in test_07_me_and_logout
    self.assertEqual(me_resp.status_code, 200)
AssertionError: 401 != 200

----------------------------------------------------------------------
Ran 7 tests in 0.836s

FAILED (failures=3)
